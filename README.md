# Hackathons.pt attendee platform

A full-stack Next.js app that lets hackathons.pt attendees link their Pretix accounts, join events with invite codes, ship projects, vote, and stay updated with announcements and guides. The admin dashboard (restricted to `fonz@hackclub.com`) can create events, generate invite codes, post announcements, update guides, and declare winners.

## Stack

- [Next.js 14](https://nextjs.org/) with the App Router
- [NextAuth](https://next-auth.js.org/) for Pretix (OpenID Connect) SSO
- [Prisma](https://prisma.io/) with SQLite for persistence
- TypeScript + server actions for form handling

## Getting started

1. Install dependencies:

   ```bash
   npm install
   ```

2. Copy the environment template and fill in the Pretix SSO credentials you created on events.hackathons.pt:

   ```bash
   cp .env.example .env.local
   ```

   | Variable | Description |
   | --- | --- |
   | `DATABASE_URL` | SQLite connection string. The default `file:./dev.db` works for local development. |
   | `NEXTAUTH_SECRET` | Random string used to sign NextAuth JWTs. |
   | `NEXTAUTH_URL` | Base URL for the Next.js app (e.g. `http://localhost:3000`). |
   | `PRETIX_ISSUER` | Pretix issuer URL (e.g. `https://events.hackathons.pt/your-organizer`). |
   | `PRETIX_CLIENT_ID` / `PRETIX_CLIENT_SECRET` | OIDC credentials from the Pretix SSO client. |

3. Generate the Prisma client and sync the schema (requires access to Prisma engine downloads):

   ```bash
   npx prisma generate
   npx prisma db push
   ```

4. Run the development server:

   ```bash
   npm run dev
   ```

5. Open <http://localhost:3000>. Sign in with Pretix; the admin dashboard is at <http://localhost:3000/admin>.

## Features

- **Pretix SSO** – attendees authenticate with their hackathons.pt account.
- **Event linking** – attendees join events via invite codes generated by the admin.
- **Project submissions** – collect name, GitHub URL, playable URL, and participant user IDs per event.
- **Voting** – one vote per attendee per event; results surface in both attendee and admin views.
- **Announcements & guides** – admins can publish updates and maintain per-event guides.
- **Winner declaration** – admins crown a winning project, which is highlighted throughout the app.

## Prisma schema overview

The Prisma schema (see [`prisma/schema.prisma`](prisma/schema.prisma)) includes models for users, events, event invites, project submissions, votes, announcements, and join tables for participants. Relationships enforce one vote per attendee per event and ensure participants exist before submissions.

## Scripts

| Script | Description |
| --- | --- |
| `npm run dev` | Start the Next.js dev server. |
| `npm run build` | Create an optimized production build. |
| `npm run start` | Serve the production build. |
| `npm run lint` | Run `next lint`. |

> **Note**
> Prisma engine downloads may require outbound network access. If downloads are blocked you can set `PRISMA_ENGINES_CHECKSUM_IGNORE_MISSING=1` before running Prisma commands, though some environments may still restrict the binary fetch.
